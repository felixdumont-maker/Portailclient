{% extends "base.html" %}
{% block title %}Réinitialiser le mot de passe | Portail Client{% endblock %}

{% block content %}
<div class="auth-page">
  <div class="auth-container">
    <img src="{{ url_for('static', filename='logo 2.png') }}" alt="Logo Cocktail Media" class="auth-logo">
    <h1>Définir un nouveau mot de passe</h1>

    <form method="post" action="{{ url_for('reset_password', token=token) }}" novalidate>
      <div class="form-group">
        <label for="password">Nouveau mot de passe</label>
        <input
          type="password"
          id="password"
          name="password"
          pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*]).{8,}"
          title="Doit contenir au moins 8 caractères, une majuscule, une minuscule, un chiffre et un caractère spécial (!@#$%^&*)."
          required
        >
      </div>

      <div class="form-group">
        <label for="password2">Confirmez le mot de passe</label>
        <input type="password" id="password2" name="password2" required>
      </div>

      <div class="show-password-container">
        <input type="checkbox" id="togglePw">
        <label for="togglePw" style="font-weight:normal;">Afficher les mots de passe</label>
      </div>

      <button type="submit" class="btn-green" style="margin-top:1.5rem;">Mettre à jour le mot de passe</button>
    </form>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  // Afficher / masquer les mots de passe
  (function () {
    const toggle = document.getElementById('togglePw');
    const p1 = document.getElementById('password');
    const p2 = document.getElementById('password2');
    if (toggle) {
      toggle.addEventListener('change', function () {
        const type = this.checked ? 'text' : 'password';
        p1.type = type;
        p2.type = type;
      });
    }
  })();
</script>
{% endblock %}
