{% extends "base.html" %}
{% block title %}Modifier le projet | Portail Admin{% endblock %}

{% block content %}
<div class="page">
  <h1 style="margin-bottom:1rem;">Modifier le projet</h1>

  <form method="post" action="">
    <div class="form-group">
      <label for="nom_projet">Nom du projet</label>
      <input type="text" id="nom_projet" name="nom_projet" required
             value="{{ projet['nom_projet'] }}">
    </div>

    <div class="form-group">
      <label for="id_client">Client</label>
      <select id="id_client" name="id_client" required>
        {% for c in clients %}
          <option value="{{ c['id'] }}" {{ 'selected' if c['id'] == projet['id_client'] else '' }}>
            {{ c['nom_complet'] }}
          </option>
        {% endfor %}
      </select>
    </div>

    <div class="form-group">
      <label for="statut">Statut du projet</label>
      <select id="statut" name="statut" required>
        <option value="Documents à donner"
          {{ 'selected' if (projet['statut']|lower in ['documents à donner','documents a donner','doc a donner','document a donner']) or (not projet['statut']) else '' }}>
          Documents à donner
        </option>

        <option value="Documents reçus"
          {{ 'selected' if projet['statut']|lower in ['documents reçus','documents recus','doc recu','doc reçu'] else '' }}>
          Documents reçus
        </option>

        <option value="Travaux en cours"
          {{ 'selected' if projet['statut']|lower in ['travaux en cours','en cours'] else '' }}>
          Travaux en cours
        </option>

        <option value="Travaux terminés"
          {{ 'selected' if projet['statut']|lower in ['travaux terminés','travaux termines','terminé','termine','terminés','fini'] else '' }}>
          Travaux terminés
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="lien_gdrive">Lien Google Drive (optionnel)</label>
      <input type="url" id="lien_gdrive" name="lien_gdrive"
             value="{{ projet['lien_gdrive'] or '' }}">
    </div>

    <div style="display:flex; gap:.75rem; margin-top:1rem;">
      <button type="submit" class="btn-green">Enregistrer</button>
      <a href="{{ url_for('admin_dashboard') }}" class="btn-outline">Annuler</a>
    </div>
  </form>
</div>
{% endblock %}
